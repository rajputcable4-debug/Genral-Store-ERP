{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Inventory ERP{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom desktop-first styling -->
    <style>
        :root{
            --sidebar-width: 260px;
            --sidebar-bg: #1f2937;
            --sidebar-accent: #374151;
            --link-color: #cbd5e1;
            --link-hover: #ffffff;
            --content-bg: #f8fafc;
        }
        html, body { height:100%; margin:0; }
        body {
            display: flex;
            background: var(--content-bg);
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color: #0f172a;
        }
        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-bg);
            position: fixed;
            top: 0; left: 0; bottom: 0;
            padding: 1.25rem;
            box-shadow: 2px 0 8px rgba(15,23,42,0.12);
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            z-index: 1000;
        }
        .sidebar .brand { color: #fff; font-weight: 600; margin-bottom: .5rem; display:block; text-decoration:none; }
        .sidebar hr { border-top: 1px solid rgba(255,255,255,0.06); margin: .5rem 0 .75rem; }
        .sidebar .nav-link {
            color: var(--link-color);
            padding: .45rem .6rem;
            border-radius: .35rem;
            display: block;
            text-decoration: none;
            transition: background .15s ease, color .15s ease, transform .06s ease;
        }
        .sidebar .nav-link:hover { background: var(--sidebar-accent); color: var(--link-hover); transform: translateX(2px); }
        .sidebar .nav-link.active { background-color: #111827; color: #fff; box-shadow: inset 3px 0 0 #06b6d4; }

        /* Content */
        .content {
            margin-left: var(--sidebar-width);
            padding: 28px;
            flex: 1;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .navbar-custom {
            background-color: #0f172a;
            color: #fff;
            border-radius: .35rem;
            padding: .5rem .75rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: .75rem;
        }
        .navbar-custom .navbar-brand { color: #fff; margin: 0; font-weight: 600; }

        footer { color: #475569; padding-top: .5rem; }

        a:focus, button:focus, input:focus, textarea:focus {
            outline: 3px solid rgba(2,132,199,0.15);
            outline-offset: 2px;
        }

        @media (max-width: 640px) {
            .sidebar { position: relative; width: 100%; height: auto; box-shadow: none; flex-direction: row; gap: .5rem; padding: .5rem; }
            .content { margin-left: 0; padding: 12px; }
            .sidebar .nav { display: flex; gap: .5rem; overflow-x: auto; }
        }
    </style>
</head>
<body>

<!-- Skip link -->
<a class="visually-hidden-focusable btn btn-light m-2" href="#main-content">Skip to content</a>

<!-- Sidebar -->
<aside class="sidebar">
    <a href="{% url 'products' %}" class="brand">Inventory ERP</a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
            <a href="{% url 'products' %}" class="nav-link {% if request.resolver_match and request.resolver_match.url_name == 'products' %}active{% endif %}" {% if request.resolver_match and request.resolver_match.url_name == 'products' %}aria-current="page"{% endif %}>Products</a>
        </li>
        <li class="nav-item">
            <a href="{% url 'vendor_details' %}" class="nav-link {% if request.resolver_match and request.resolver_match.url_name == 'vendor_details' %}active{% endif %}">Vendors</a>
        </li>
        <li class="nav-item">
            <a href="{% url 'stock_receiving_list' %}" class="nav-link {% if request.resolver_match and request.resolver_match.url_name == 'stock_receiving_list' %}active{% endif %}">Stock Receiving</a>
        </li>
        <li class="nav-item">
            <a href="{% url 'sales' %}" class="nav-link {% if request.resolver_match and request.resolver_match.url_name == 'Sales' %}active{% endif %}">Sales</a>
        </li>
        <li class="nav-item">
            <a href="{% url 'Sale_return' %}" class="nav-link {% if request.resolver_match and request.resolver_match.url_name == 'sale_return' %}active{% endif %}">Sales Return</a>
        </li>
    </ul>
    <hr>
    <div class="text-white small">Welcome</div>
</aside>

<!-- Main content -->
<main id="main-content" class="content" tabindex="-1">
    <nav class="navbar navbar-custom mb-4" role="navigation">
        <div class="container-fluid p-0">
            <span class="navbar-brand mb-0 h5">{% block page_title %}Dashboard{% endblock %}</span>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <footer class="mt-4 text-muted small">
        <div class="container-fluid">&copy; {% now "Y" %} Inventory ERP</div>
    </footer>
</main>

<!-- Skip link focus script -->
<script>
document.addEventListener('DOMContentLoaded', function(){
  var skip = document.querySelector('a[href="#main-content"]');
  if(skip){
    skip.addEventListener('click', function(){
      var main = document.getElementById('main-content');
      if(main){ setTimeout(function(){ main.focus(); }, 10); }
    });
  }
});
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
